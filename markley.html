<!DOCTYPE html>
<html>
<head>
  <title>MHacks14</title>
</head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<!-- 1. Include the client library -->
  <script src="https://cdn.import.io/js/2.0.0/importio.js"></script>

<!-- 2. Configure the library -->
  <script type="text/javascript">
    importio.init({
      "auth": {
        "userGuid": "1c3293c6-bb4c-448e-8d74-0159560d2945",
        "apiKey": "AVE2h2hk4gLGpc6y9qsrwxfVzB1ibF1H72KzQeQKegTJb3eEzO8T528UB8xER8RZm4TBtKsix7zVhB5OcutPiw=="
      },
      "host": "import.io"
    });

    // Data and done callbacks
    var dataCallback = function(data) {
      console.log("Data received", data);
      for (var i = 0; i < data.length; i++) {
      var d = data[i];
    for (var k in d.data) {
      document.write("<i>" + k + "</i>: " + d.data[k] + "<br />");
    }
    document.write("<hr>");
    }
    }
    var doneCallback = function(data) {
      console.log("Done, all data:", data);
      document.write("<b>Done</b><hr>");
    }

// 3. Do the query (when the function is called)
    var QueryMarkley = function() {
      // Query for tile Integrate Page Example
      importio.query({
        "connectorGuids": [
          "87edf7fb-895f-403d-be47-14b454745f98"
        ],
        "input": {
          "webpage/url": "http://www.housing.umich.edu/dining/menus/markley"
        }
      }, { "data": dataCallback, "done": doneCallback });
    }
  </script>
  <body onload="QueryMarkley()"></body>
</html>